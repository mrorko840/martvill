"use strict";if($(".main-body .page-wrapper").find("#theme-container").length){$(document).ready((function(){$(".conditional").ifs(),$("#success-message").css("display","none"),$("#warning-message").css("display","none"),""!=window.location.hash?($(window.location.hash+"-tab").trigger("click"),$(window.location.hash+"-tab").closest("ul").siblings("a").trigger("click")):"layout"==appearance_menu?$("#v-pills-layout-tab").trigger("click"):$("#v-pills-social-share-tab").trigger("click"),$(document).on("change keyup","input",(function(){$(".warning-message").addClass("alert-secondary"),$("#warning-message").css("display","block"),$("#warning-msg").html(jsLang("Settings have changed, you should save them!"))}))})),$(document).on("click",".folding",(function(){let parent=this.closest(".ui-state-default");this.classList.contains("closed")?($(parent).find(".dd-content").removeClass("card-hide"),$(this).removeClass("closed")):($(parent).find(".dd-content").addClass("card-hide"),$(this).addClass("closed"))})),$(document).on("click",".header-text",(function(){$(this).closest(".ui-state-default").find(".folding").trigger("click")})),$(document).on("click",".cr",(function(){var value;1==$(this).closest(".switch").find("input").val()?$(this).closest(".switch").find("input").val(0):$(this).closest(".switch").find("input").val(1)}));const blockElement=(element,_data={})=>{let options=Object.assign({},{message:'<div class="spinner-border appearance-loader text-warning" role="status"><span class="sr-only">Loading...</span></div>',css:{backgroundColor:"transparent",border:"none"}},_data);element.block(options)};function changeLayout(layout){var fragmentation=window.location.hash;blockElement($("#main-appearance")),$.ajax({url:ADMIN_SITE_URL+"/theme/list",data:{layout:layout},type:"GET",dataType:"JSON",success:function(data){$("#main-appearance").html(data.data),$("#v-pills-social-share-tab").trigger("click"),$("#success-message").css("display","none"),$("#warning-message").css("display","none"),"default"!=layout?($("li a.header").trigger("click"),$("#v-pills-social-share-tab").closest("li").remove(),$("#v-pills-custom-css-js-tab").closest("li").remove(),$("#v-pills-page-config-tab").closest("li").remove(),fragmentation.includes("social")||fragmentation.includes("page-config")||fragmentation.includes("custom-css-js")?$("#v-pills-topNav-tab").trigger("click"):($(fragmentation+"-tab").trigger("click"),$(fragmentation+"-tab").closest("ul").siblings("a").trigger("click"))):($(fragmentation+"-tab").trigger("click"),$(fragmentation+"-tab").closest("ul").siblings("a").trigger("click")),$((function(){$("#sortable").sortable({axis:"y",cursor:"move"})}))},complete:function(){$(".conditional").ifs(),$((function(){var dd1=new dropDown($("#myAppearanceDropdown"))}))}})}$(document).on("click",".tab-name",(function(){setTimeout(()=>{$(".nav-link.active").closest("ul").addClass("show").siblings("a").removeClass("collapses").attr("aria-expanded",!0)},100);var id=$(this).attr("data-id");$("#theme-title").html(id),$(".tab-pane").removeClass("show active"),$(`.tab-pane[aria-labelledby="${$(this).attr("id")}"`).addClass("show active"),$(".tab-name").removeClass("active").attr("aria-selected",!1),$(this).addClass("active").attr("aria-selected",!0),$(this).is("#v-pills-layout-tab")?$(".modal-footer.appearance").hide():$(".modal-footer.appearance").show()})),$(document).on("click","#layout-setting",(function(){changeLayout($(this).attr("data-val"))})),$(document).on("click","#layout-edit",(function(){$("#edit-layout").find('input[name="name"], input[name="old_layout"]').val($(this).attr("data-layout"))}));var cmsSaveCount=0;function dropDown(el){this.dd=el,this.placeholder=this.dd.children("span"),this.opts=this.dd.find("ul.dropdown > li"),this.val="",this.index=-1,this.initEvents()}$(document).on("click",".theme-option-save-btn",(function(event){if(event.preventDefault(),++cmsSaveCount>1)return!1;var btn=this;$(this).text(jsLang("Saving")).append('<div class="spinner-border spinner-border-sm ml-2" role="status">');var i=0;$("#sortable.footer-main").find("li").each((k,v)=>{$(v).find(".sort-data").val(++i)}),$("textarea.custom").each((k,v)=>{var value=$(v).val().replace(/<style.*>|<script.*>/,"").replace(/"/g,"double_quotation");$(v).closest(".row").append(`\n                <input type="hidden" name="${$(v).attr("name")}" value="${value}">\n            `)}),$(".custom-file-input").each((k,v)=>{$(v).val($(v).closest(".form-group").find('input[name="file_id[]"').val())}),$.ajax({url:SITE_URL+"/theme/store",type:"POST",data:{_token:token,enctype:"multipart/form-data",data:$("#optionForm").find("input, select").serialize()},success:function(data){var cls="alert-danger";1==data.status&&(cls="alert-success"),$(".abc").addClass(cls),$("#success-message, #warning-message").css("display","block"),$("#warning-msg").html(data.message)},complete:function(data){$(btn).text(jsLang("Save")).find(".spinner-border").remove(),cmsSaveCount=0}}),setTimeout(()=>{$("#success-message, #warning-message").slideUp(500),$(".abc").removeClass("alert-success alert-danger")},5e3)})),$(document).on("click",".add-new-widget-title",(function(){var widget=$(this).attr("data-widget");$(this).closest(".row").before(`\n            <div class="form-group row">\n                <div class="col-sm-5">\n                    <div class="input-group bg-transparent">\n                        <input type="text" class="form-control" name="${layout}_template_footer[main][${widget}][data][${$(this).attr("data-id")}][label]" value="" maxlength="40">\n                    </div>\n                </div>\n                <div class="col-sm-6">\n                    <div class="input-group bg-transparent">\n                        <input type="text" class="form-control" name="${layout}_template_footer[main][${widget}][data][${$(this).attr("data-id")}][link]" value="">\n                    </div>\n                </div>\n                <div class="col-sm-1 ps-0">\n                    <div class="input-group bg-transparent cursor_pointer remove-widget-title">\n                        <span class="input-group-text rounded"><i class="feather icon-trash-2 fa-2x"></i></span>\n                    </div>\n                </div>\n            </div>\n        `),$(this).attr("data-id",Number($(this).attr("data-id"))+1)})),$(document).on("click",".remove-widget-title",(function(){$(this).closest(".row").remove()})),$((function(){$("#sortable").sortable({axis:"y",cursor:"move"})})),$(document).on("keyup",".widget-title",(function(){$(this).closest("li").find(".header-title").text($(this).val())})),$(document).on("click",".img-delete-icon",(function(){var id=$(this).attr("data-objectId");$("#optionForm").prepend(`\n            <input type="hidden" name="delete_file_ids[]" value="${id}" />\n        `),$(this).closest("div.old-image").remove()})),$((function(){var dd1=new dropDown($("#myAppearanceDropdown"));$(document).on("click",(function(){$(".appearance-dropdown").removeClass("active")}))})),dropDown.prototype={initEvents:function(){var obj=this;obj.dd.on("click",(function(){return $(this).toggleClass("active"),!1})),obj.opts.on("click",(function(){changeLayout($(this).attr("data-val"));var opt=$(this);obj.val=opt.text(),obj.index=opt.index(),obj.placeholder.text(obj.val)}))}},$(document).on("click","ul.nav.nav-list > li",(function(e){if(!e.target.href)return!1;window.location.replace(e.target.href)}));var debounce=null;$(document).on("change",".layout-primary-color",(function(){var name=$(this).attr("name"),value=$(this).val();clearTimeout(debounce),debounce=setTimeout((function(){$.ajax({url:SITE_URL+"/theme/store/primary-color",type:"POST",data:{_token:token,name:name,value:value},success:function(data){var cls="alert-danger";1==data.status&&(cls="alert-success"),$(".abc").addClass(cls),$("#success-message, #warning-message").css("display","block"),$("#warning-msg").html(data.message)},complete:function(){setTimeout(()=>{$("#success-message, #warning-message").slideUp(500),$(".abc").removeClass("alert-success alert-danger")},5e3)}})}),1e3)}))}$(document).on("click","#v-pills-topNav-tab",(function(){$(".tab-pane").removeClass("show active"),$("#"+$(this).attr("id")).addClass("active").attr("aria-selected",!0),$(`.tab-pane[aria-labelledby="${$(this).attr("id")}"`).addClass("show active")})),$(document).on("click",".nav-list .nav-link",(function(){var target=$(".tab-pane");$([document.documentElement,document.body]).animate({scrollTop:$(target).offset().top-350},350)})),setTimeout(()=>{$(".nav-link.active").closest("ul").addClass("show").siblings("a").removeClass("collapses").attr("aria-expanded",!0)},100);