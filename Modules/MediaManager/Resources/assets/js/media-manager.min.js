"use strict";var type,customType,acceptedFiles,currentImageInput,ids=[];let initialPaginationLinks="";var loader=`<div class="placeholder wave p-0" style="height: 16px"><div class="square"></div></div>`;$(document).on("click","#image-status,.has-media-manager",function(){customType=$(this).attr("data-type"),$("#exampleModalCenter").modal("show"),currentImageInput=this}),$("#exampleModalCenter").on("show.bs.modal",function(a){$("#file-id").val($(a.relatedTarget).attr("id")),$("#file-name").val($(a.relatedTarget).attr("name")),$("#file-type").val($(a.relatedTarget).attr("type")),$("#file-size").val($(a.relatedTarget).attr("size")),$("#uploaded-by").val($(a.relatedTarget).attr("user")),$("#uploaded-date").val($(a.relatedTarget).attr("time")),$("#file-id").val($(a.relatedTarget).attr("id")),$("#download-image").attr("href",SITE_URL+"/uploaded-files/download/"+$(a.relatedTarget).attr("id")),$(".page-link").addClass("modal-paginator"),$("#file-type").hide(),$(".dz-message").show(),$(".dz-image-preview").hide(),type=$(a.relatedTarget).attr("data-type"),type="undefined"==typeof customType?type:customType,fetch_data(1,type),$(".sort-option-modal").prop("selectedIndex",0),$("#search-input").val("")}),$("#exampleModalCenter").on("hidden.bs.modal",function(){ids=[]}),$(".main-body .page-wrapper").find("#exampleModalCenter").length&&$(document).ready(function(){$(".pagination li a").addClass("custom-paginator")});let images=[];const image_show=()=>{let a="";return images.forEach(b=>{a+=`<div class="image_container d-flex flex-column justify-content-center align-items-start position-relative m-3">
              <img src= ${b.url} alt="Image">
              <p class="m-1">${b.name.slice(0,15).split(".")[0]+"."+b.file.type.split("/")[1]}</p>
              <small class="ml-1">${(.001*b.size).toFixed(2)} kb</small>
              <span class="position-absolute rounded-circle text-center img-remove-icon img-del" onclick="delete_image(${images.indexOf(b)})">&times;</span>
          </div>`}),a},delete_image=a=>{2>images.length&&addFiles(),images.splice(a,1),document.getElementById("img-container").innerHTML=image_show()},addFiles=()=>{$("#add-files").css("display","flex"),$("#add-more-files").addClass("add-more-files")},check_duplicate=a=>{let b=!0;if(0<images.length)for(let c of images)if(c.name===a){b=!1;break}return b};$(document).on("click","#clear-items",function(){addFiles(),images=[],image_show(),removeAllChildNodes(document.getElementById("img-container"))});function removeAllChildNodes(a){for(;a.firstChild;)a.removeChild(a.firstChild)}$(document).on("click",".img-remove-icon",function(){$(this).parent().remove()}),$(document).on("click",".close",function(){$(".item-border").remove()}),$(document).on("click",".image-card",function(){"single"==$.trim($(currentImageInput).attr("data-val"))?(ids=[],$(".image-card").each(function(){$(this).removeClass("item-border")}),$(this).toggleClass("item-border"),$(this).hasClass("item-border")&&ids.push($(".item-border").attr("id"))):($(this).toggleClass("item-border"),$(this).hasClass("item-border")?ids.push(this.id):ids.splice($.inArray(this.id,ids),1));var a=$(".item-border").length;$("#add-file-count").text(a)}),$(document).on("click","#clear-item",function(){$(".image-card").removeClass("item-border"),$("#add-file-count").text(0),ids=[]}),$(document).on("click","#select-file",function(){$("#select-items, #file-count, #upload-card-header, #modal-pagination-container, #clear-item, #img-container").show(),$("#browse-file, #clear-items, #file-type").hide(),$(this).addClass("modal-title-color"),$("#upload-new").removeClass("modal-title-color"),$("#img-container").show()}),$(document).on("click","#upload-new",function(){""!=type&&$("#accepted-type").text(type);let a=Dropzone.instances[0];""!=type&&type!=null&&(a.options.acceptedFiles="."+type.split(",").join(",.")),a&&a.on("complete",a=>{"success"==a.status&&(type="undefined"==typeof customType?type:customType,fetch_data(1,type))}),$("#select-items, #modal-pagination-container, #upload-card-header, #file-count, .dz-image-preview, #clear-item").hide(),$("#browse-file, #file-type, .dz-message ").show(),$(this).addClass("modal-title-color"),$("#select-file").removeClass("modal-title-color")}),$(document).on("click",".btn-file-add",function(){getImages($(currentImageInput).attr("data-val")),$("#exampleModalCenter").modal("hide")});function getImages(a){0!=ids.length&&$.ajax({type:"POST",dataType:"json",url:SITE_URL+"/media-manager/files/upload",data:{file_id:ids,_token:token},success:function(b){0<$("#img-container").length&&"multiple"!=a?$("#img-container").html(b.html):0<$("#img-container").length&&$("#img-container").append(b.html),$(currentImageInput).trigger("file-attached",b)}})}$(document).on("click",".modal-paginator",function(a){a.preventDefault(),type="undefined"==typeof customType?type:customType;let b=$(this).attr("href").split("page=")[1],c=b,d=$(".sort-option-modal").find("option:selected").val();d!==void 0&&null!==d&&(c=`${b}&sort_value=${d}`);let e=$("#search-input").val();c+=`&search_value=${e}`,fetch_data(c,type)});function fetch_data(a,b){$.ajax({url:SITE_URL+"/paginate-data?page="+a,beforeSend:function(){$("#loader").show()},method:"POST",data:{sort:$(this).val(),imageType:b,_token:token},success:function(a){$("#image-card-container").html(a),$("#loader").hide(),$("#modal-pagination-container").html($("#latest-pagination-data-container").html()),$(".pagination li a").addClass("modal-paginator")}})}$(document).on("change",".sort-option",function(){$("#media-list").submit(),$.ajax({type:"get",dataType:"html",url:SITE_URL+"/uploaded-files",data:{sort:$(this).val(),imageType:type,_token:token},success:function(a){$("#blog-image").append(a)}})}),$(document).on("change",".sort-option-modal",function(){$.ajax({type:"get",dataType:"html",beforeSend:function(){$("#loader").show()},url:SITE_URL+"/sort-files",data:{imageType:type,sort_value:$(this).val()},success:function(a){$("#select-items").html(""),$("#select-items").append(a),$("#loader").hide()}})}),$(document).on("keyup",".search-image",function(){$.ajax({type:"get",dataType:"html",url:SITE_URL+"/sort-files",data:{sort_name:$(this).val(),imageType:type},success:function(a){$("#select-items").html(""),$("#select-items").append(a)}})}),$(document).on("click",".copy-link",function(){let a=$(this).attr("data-url").replaceAll("\\","/");window.isSecureContext&&navigator.clipboard?(navigator.clipboard.writeText(a),swal(jsLang("Link copied to clipboard"),{icon:"success",buttons:[!1,jsLang("Ok")]})):swal(jsLang("Domain not secure! You have to copy it manually:"),{icon:"error",content:{element:"input",attributes:{value:a,type:"text"}},closeOnClickOutside:!1,buttons:[!1,jsLang("Close")]})}),$(document).on("click",".delete-image",function(){swal({title:jsLang("Are you sure?"),icon:"warning",buttons:[jsLang("Cancel"),jsLang("Ok")],dangerMode:!0}).then(a=>{a&&$.ajax({dataType:"json",data:{id:$(this).attr("data-id"),_token:token},url:SITE_URL+"/delete-image",type:"POST",success:function(a){"success"==a.resp?swal(jsLang("Successfully deleted."),{icon:"success",buttons:[!1,jsLang("Ok")]}).then(function(){window.location.reload()}):"info"==a.status?swal(a.message,{icon:"info",buttons:[!1,jsLang("Ok")]}):swal(jsLang("Something went wrong, please try again."),{icon:"error",buttons:[!1,jsLang("Ok")]})}})})}),$("#exampleModal").on("show.bs.modal",function(a){$("#file-id").val($(a.relatedTarget).attr("id")),$("#file-name").val($(a.relatedTarget).attr("name")),$("#file-type").val($(a.relatedTarget).attr("type")),$("#file-size").val($(a.relatedTarget).attr("size")),$("#uploaded-by").val($(a.relatedTarget).attr("user")),$("#uploaded-date").val($(a.relatedTarget).attr("time")),$("#file-id").val($(a.relatedTarget).attr("id")),$("#download-image").attr("href",SITE_URL+"/uploaded-files/download/"+$(a.relatedTarget).attr("id")),$(".page-link").addClass("modal-paginator")});const getFilePreview=a=>`<div class="img-box-two mt-15p"> <img class="fit-boxed" src="${a.url}" alt="${a.name}"> <input type="hidden" value="${a.id}" name="file_id[]"> <svg class="svg-postion remove-product-image" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"> <circle cx="7" cy="7" r="7" fill="#FCCA19"> </circle> <path fill-rule="evenodd" clip-rule="evenodd" d="M4.21967 4.21967C4.51256 3.92678 4.98744 3.92678 5.28033 4.21967L9.78033 8.71967C10.0732 9.01256 10.0732 9.48744 9.78033 9.78033C9.48744 10.0732 9.01256 10.0732 8.71967 9.78033L4.21967 5.28033C3.92678 4.98744 3.92678 4.51256 4.21967 4.21967Z" fill="#2C2C2C"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M9.78033 4.21967C9.48744 3.92678 9.01256 3.92678 8.71967 4.21967L4.21967 8.71967C3.92678 9.01256 3.92678 9.48744 4.21967 9.78033C4.51256 10.0732 4.98744 10.0732 5.28033 9.78033L9.78033 5.28033C10.0732 4.98744 10.0732 4.51256 9.78033 4.21967Z" fill="#2C2C2C"></path> </svg> </div>`,renderFilePreview=(a,b)=>{let c="";return a.length?a.forEach(a=>{c+=getFilePreview(a,b)}):c=getFilePreview(a,b),c};$(document).on("file-attached",".media-manager-img",function(a,b){let c=b.data;$(this).closest(".preview-parent").find(".preview-image").html(renderFilePreview(c,$(this).data("name")))}),$(".pagination > .page-item > .page-link").on("click",a=>{a.preventDefault();let b=a.target.href,c="",d=$("input[name='sort_name']").val();c=$(".sort-option").find("option:selected").val(),window.location.href=`${b}&sort_value=${c}&sort_name=${d}`}),$(()=>{initialPaginationLinks=`<nav> <ul class="pagination"> <li class="page-item disabled" aria-disabled="true"> <span class="page-link">Previous</span> </li><li class="page-item"> <a class="page-link f-14 modal-paginator" href="${SITE_URL}/paginate-data?page=2" rel="next">Next</a> </li></ul> </nav>`}),$(".sort-option-modal").on("change",()=>{$("#modal-pagination-container").html(initialPaginationLinks),$("#search-input").val("")});
