'use strict';const refundDt=new DataTransfer;var refundObj={};imgInp.onchange=()=>{for(var a,b=imgInp.files,c=b.length,d=0;d<c;d++)if(a=b[d],5>d&&5>refundDt.files.length){refundDt.items.add(a);var g=(Math.random()+1).toString(36).substring(7);refundObj[g]=a;var h=new FileReader;h.onload=function(a){$("#refund_image").append(`
                    <div class="refund-image mt-5">
                        <img data-file="${g}" class="r-img w-16 h-16 object-cover" src="${a.target.result}"/>
                        <span>&#10060</span>
                    </div>
                `)},h.readAsDataURL(a)}imgInp.files=refundDt.files},$(document).on("click",".refund-image span",function(){var a=$(this).siblings(".r-img").attr("data-file"),b=refundObj.file_key;refundDt.items.remove(b),$("#imgInp")[0].files=refundDt.files,$(this).closest("div.refund-image").remove()});function quantitySelect(){var a=$("select[name='order_items']").find(":selected").data("quantity"),b=$("select[name='order_items']").find(":selected").data("order_detail_id");$("input[name=\"order_detail_id\"]").val(b),$("select[name='quantity_sent']").html(`<option value="">${jsLang("Select one")}</option>`);for(let b=1;b<=a;b++)$("select[name='quantity_sent']").append(`
            <option value="${b}">${b}</option>
        `)}var itemFind=!1;function findProducts(a){$.ajax({url:SITE_URL+"/user/refund-products/"+a,type:"GET",dataType:"JSON",success:function(b){for(const c in $("#order_items").html(`<option value="">${jsLang("Select one")}</option>`),b[a])$("#order_items").append(`
                    <option ${product_id==b[a][c].product_id?"selected":""} data-order_detail_id="${b[a][c].id}" data-quantity="${b[a][c].quantity}" value="${b[a][c].product_id}">${b[a][c].product_name}</option>
                `);itemFind=!0}})}if(0<product_id){findProducts($("select[name='order_reference']").val());var refund_count=1,intervals=setInterval(()=>{refund_count++,!0==itemFind&&(quantitySelect(),clearInterval(intervals)),300==refund_count&&clearInterval(intervals)},100)}$("select[name='order_reference']").on("change",function(){var a=this;clearTimeout(void 0);setTimeout(function(){var b=$(a).val();b?findProducts(b):($("#order_items").html(`<option value="">${jsLang("Select one")}</option>`),$("select[name='quantity_sent']").html(`<option value="">${jsLang("Select one")}</option>`))},100)}),$("select[name='order_items']").on("change",function(){quantitySelect()});var messageBox=$(".message-box");messageBox.scrollTop(messageBox.prop("scrollHeight")),$(".refund-select").select2();