'use strict';$(".conditional").ifs(),$("#v-pills-general-tab").trigger("click"),$(document).on("click",".tab-name",function(){var a=$(this).attr("data-id");$("#theme-title").html(a),$(".tab-pane[aria-labelledby=\"home-tab\"").addClass("show active"),$("#"+$(this).attr("id")).addClass("active").attr("aria-selected",!0)}),$(document).on("keyup",".float-validation",function(){var a=$(this).val();if(""!=a){var b=a.split("."),c=b[0]??0,d=b[1]??0;8<b[0].length&&(c=b[0].substring(0,8)),1<b.length&&8<b[1].length&&(d=b[1].substring(0,8)),1<b.length?$(this).val(c+"."+d):$(this).val(c)}}),$(document).on("click",".cr",function(){var a=$(this).closest(".switch").find("input").val();1==a?$(this).closest(".switch").find("input").val(0):$(this).closest(".switch").find("input").val(1)}),$(document).on("click","label.free_shipping_checkbox",function(){"checked"==$(this).siblings("input").attr("checked")?$(this).siblings("input").val(0).attr("checked",!1):$(this).siblings("input").val(1).attr("checked","checked")}),$("select[name=\"free_shipping_requirement\"]").each((a,b)=>{freeShippingRequirement($(b))}),$(document).on("change","select[name=\"free_shipping_requirement\"]",function(){freeShippingRequirement(this)});function freeShippingRequirement(a){""!=$(a).val()&&"coupon"!=$(a).val()?$(a).closest(".form-group").siblings(".free_shipping_condition").removeClass("d-none"):$(a).closest(".form-group").siblings(".free_shipping_condition").addClass("d-none")}function changeSetting(a){$(a).closest(".parent").find(".warning-message").addClass("alert-secondary"),$(a).closest(".parent").find(".warningMessage").slideDown(300),$(a).closest(".parent").find("#warning-msg").html(jsLang("Settings have changed, you should save them!"))}function successNotification(a,b){a.find(".abc").addClass("alert-success"),a.find(".warningMessage").slideDown(),a.find(".msg").html(b)}function failNotification(a,b){a.find(".abc").addClass("alert-danger"),a.find(".warningMessage").slideDown(),a.find(".msg").html(b)}function errorNotification(a,b){a.find(".abc").addClass("alert-danger"),a.find(".warningMessage").slideDown(),$.each(b.responseJSON.errors,function(b,c){a.find(".msg").html(c)})}function timeoutNotification(a){setTimeout(()=>{a.closest(".parent").find(".warningMessage").slideUp(500),setTimeout(()=>{a.closest(".parent").find(".abc").removeClass("alert-success alert-danger")},501)},5e3)}$(document).on("change","input, select",function(){changeSetting(this)}),$(document).on("click",".action-btn",function(){changeSetting(this),$(this).closest("tr").remove()}),$(document).on("click",".add-new-location",function(){$(this).closest("tr").before($(".add-new-location-data tbody").html()),$(this).closest("tbody").find("tr td:contains('No location found.')").closest("tr").remove()}),$(document).on("click",".add-new-class",function(){$(this).closest("tr").before($(".add-new-class-data tbody").html()),$(this).closest("tbody").find("td:contains(\"No shipping class found.\")").closest("tr").remove()}),$(document).on("click",".delete-button",function(){$(this).closest(".accordion").remove()});var shippingZoneSaveCount=0;function saveShippingZone(a){if(shippingZoneSaveCount++,1<shippingZoneSaveCount)return!1;var b=$(a).closest(".parent"),c=[],d=a;$(a).text(jsLang("Saving")).append(`<div class="spinner-border spinner-border-sm ml-2" role="status">`),$(a).closest(".accordion-parent").find(".accordion").each((a,b)=>{var d={};$(b).find("select, input").each((a,b)=>{var c=$(b).attr("name");"country"!=c&&"city"!=c&&"state"!=c&&"zip"!=c&&(d[$(b).attr("name")]=$(b).val())});var e=[];$(b).find("table tr").each((a,b)=>{var c={};$(b).find("input").each((a,b)=>{c[$(b).attr("name")]=$(b).val()}),0<Object.keys(c).length&&e.push(c)}),d.location=e;var f=[];$(b).find(".shipping_classes .class").each((a,b)=>{var c={};$(b).find("select, input").each((a,b)=>{c[$(b).attr("name")]=$(b).val()}),0<Object.keys(c).length&&f.push(c)}),d.classes=f,c.push(d)}),$.ajax({url:SITE_URL+"/shipping-zone/store",type:"POST",data:{_token:token,data:JSON.stringify(c)},dataType:"JSON",success:function(a){"success"==a.status?(successNotification(b,a.message),$(".save-shipping-zone").trigger("click"),$(d).closest(".accordion-parent").find(".accordion").length?$(d).closest("div").siblings(".no_shipping_zone").remove():$(d).closest("div").before(`
                        <div class="border p-2 no_shipping_zone">
                            <h4 class="text-center">${jsLang("No shipping zone found.")}</h4>
                        </div>
                    `)):failNotification(b,a.message)},error:function(a){errorNotification(b,a)},complete:function(){$(d).text(jsLang("Save")).find(".spinner-border").remove(),shippingZoneSaveCount=0}}),timeoutNotification(b)}$(document).on("click",".nav-list-button",function(){var a=$(this).attr("data-tab");$(this).addClass("active").siblings().removeClass("active"),$("#tab-"+a).addClass("active").siblings().removeClass("active")}),$(document).on("click",".add-shipping-zone",function(){$(this).closest("div").siblings(".no_shipping_zone").remove();var a=["main","location","method","flat","local","free"],b={};for(const c in a)b[a[c]]=Math.floor(1e7*Math.random());var c=`
    <div id="content-${b.main}">
        ${$(".new-zone-content").html()}
    </div>
`;$(this).closest("div").before(c),$("#content-"+b.main).find("input[name=\"id\"]").val(b.main),$("#content-"+b.main).find(".location-btn").attr("data-bs-target","#flush-collapse-"+b.location).closest(".accordion").attr("id","accordionFlush-"+b.main).find("#flush-collapseTwo").attr({id:"flush-collapse-"+b.location,"data-bs-parent":"#accordionFlush-"+b.main}),$("#content-"+b.main).find(".method-btn").attr("data-bs-target","#flush-collapse-"+b.method).closest(".accordion").find("#flush-collapseOne").attr({id:"flush-collapse-"+b.method,"data-bs-parent":"#accordionFlush-"+b.main}),$("#content-"+b.main).find(".methods .free-shipping").attr({href:"#free_shipping-"+b.free,"aria-controls":"free_shipping-"+b.free}).closest("div").find("#free_shipping").attr("id","free_shipping-"+b.free),$("#content-"+b.main).find(".methods .local-pickup").attr({href:"#local_pickup-"+b.local,"aria-controls":"local_pickup-"+b.local}).closest("div").find("#local_pickup").attr("id","local_pickup-"+b.local),$("#content-"+b.main).find(".methods .flat-rate").attr({href:"#flat_rate-"+b.flat,"aria-controls":"flat_rate-"+b.flat}).closest("div").find("#flat_rate").attr("id","flat_rate-"+b.flat),$("#content-"+b.main).find("#flat_rate_status").attr("id","flat_rate_status-"+b.main).siblings("label").attr("for","flat_rate_status-"+b.main),$("#content-"+b.main).find("#local_pickup_status").attr("id","local_pickup_status-"+b.main).siblings("label").attr("for","local_pickup_status-"+b.main),$("#content-"+b.main).find("#free_shipping_status").attr("id","free_shipping_status-"+b.main).siblings("label").attr("for","free_shipping_status-"+b.main)}),$(document).on("click",".save-shipping-zone",function(){saveShippingZone(this)});var shippingClassClickCount=0;$(document).on("click",".save-class",function(){if(shippingClassClickCount++,1<shippingClassClickCount)return!1;var a=$(this).closest(".parent"),b=$(this).closest("tr"),c=SITE_URL+"/shipping-class/store",d=this,e=[];$(this).text(jsLang("Saving")).append(`<div class="spinner-border spinner-border-sm ml-2" role="status">`),$(this).closest("tbody").find("tr").each((a,b)=>{if(2<$(b).find("input, select").length){var c={};$(b).find("input, select").each((a,b)=>{c[$(b).attr("name")]=filterXSS($(b).val())}),e.push(c)}}),$.ajax({url:c,type:"POST",data:{_token:token,data:e},dataType:"JSON",success:function(b){if("success"==b.status){successNotification(a,b.message),$(d).closest("tbody").find("td:contains(\"No shipping class found.\")").closest("tr").remove(),2>=$(d).closest("tbody").find("tr").length&&$(d).closest("tr").before(`
                        <tr>
                            <td class="text-center" colspan="5">${jsLang("No shipping class found.")}</td>
                        </tr>
                    `);var c=[];$(".shipping_classes:first").find("input, select").each((a,b)=>{"slug"==$(b).attr("name")&&c.push($(b).val())});var f=[];for(const a in e)f.push(e[a].slug),c.includes(e[a].slug)||""==e[a].slug||(0==$(".flat_rate_status").siblings(".shipping_classes").length&&$(".flat_rate_status").after(`
                                <div class="shipping_classes">
                                    <div class="row bg-light-gray py-3 mt-14 mb-4 class_description">
                                        <div class="col-12">
                                            <h5 class="d-block">${jsLang("Shipping class costs")}</h5>
                                            <p class="text-dark m-0">${jsLang("These costs can optionally be added based on the product shipping class.")}</p>
                                        </div>
                                    </div>
                                    <div class="form-group row class">
                                        <label for="" class="col-3 control-label">${jsLang("No class shipping cost")}</label>
                                        <div class="col-4">
                                            <div class="input-group flex-wrap h-44p">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text rounded-0 rounded-start h-44p">${currencySymbol}</span>
                                                </div>
                                                <input type="hidden" name="slug" value="no-class">
                                                <input type="text" class="form-control positive-float-number float-validation" name="cost" placeholder="N/A" value="">
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <select class="select form-control" name="cost_type">
                                                <option value="cost_per_order">${jsLang("Cost per order")}</option>
                                                <option value="cost_per_quantity">${jsLang("Cost per quantity")}</option>
                                                <option value="percent_sub_total_item_price">${jsLang("Percent sub total of product price")}</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group row flat_rate_calculation_type">
                                    <label for="" class="col-3 control-label">${jsLang("Calculation Type")}</label>
                                    <div class="col-4">
                                        <select class="form-control" name="flat_rate_calculation_type">
                                            <option value="class">${jsLang("Per class: Charge shipping for each shipping class individually")}</option>
                                            <option value="order">${jsLang("Per order: Charge shipping for the most expensive shipping class")}</option>
                                        </select>
                                    </div>
                                </div>
                            `),$(".class_description").after(`
                        <div class="form-group row class">
                            <label for="" class="col-3 control-label text-left">${(""==e[a].name?e[a].slug:e[a].name)+" "+jsLang("Class shipping cost")}</label>
                            <div class="col-4">
                                <div class="input-group flex-wrap h-44p">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text rounded-0 rounded-start h-44p">${currencySymbol}</span>
                                    </div>
                                    <input type="hidden" name="slug" value="${e[a].slug}">
                                    <input type="text" class="form-control" name="cost" placeholder="N/A" value="">
                                </div>
                            </div>
                            <div class="col-4">
                                <select class="select form-control" name="cost_type">
                                    <option value="cost_per_order">${jsLang("Cost per order")}</option>
                                    <option value="cost_per_quantity">${jsLang("Cost per quantity")}</option>
                                    <option value="percent_sub_total_item_price">${jsLang("Percent sub total of product price")}</option>
                                </select>
                            </div>
                        </div>
                        `));for(const a in c)2>e.length&&($(".shipping_classes").remove(),$(".flat_rate_calculation_type").remove()),f.includes(c[a])||$(`input[value="${c[a]}"`).closest(".class").remove();saveShippingZone($(".save-shipping-zone"))}else failNotification(a,b.message)},error:function(b){errorNotification(a,b)},complete:function(){$(d).text(jsLang("Save")).find(".spinner-border").remove(),shippingClassClickCount=0}}),timeoutNotification(b)});var shippingSettingCount=0;$(document).on("click",".shipping-setting-btn",function(){if(shippingSettingCount++,!(1<shippingSettingCount)){$(this).text(jsLang("Saving")).append(`<div class="spinner-border spinner-border-sm ml-2" role="status">`);var a=$(this).closest("tr"),b=$(this).closest(".parent");$.ajax({url:SITE_URL+"/shipping-setting/store",type:"POST",data:$(".shipping-setting").find("input, select").serialize(),dataType:"JSON",success:function(c){"success"==c.status?(successNotification(b,c.message),a.remove()):failNotification(b,c.message)},error:function(a){errorNotification(b,a)},complete:function(){$(".shipping-setting-btn").text(jsLang("Save")).find(".spinner-border").remove(),shippingSettingCount=0}}),timeoutNotification(b)}});var currentTab="v-pills-general-tab",activeHelp=!1;$(document).on("click",".tab-name",function(){"v-pills-help-tab"!=$(this).attr("id")&&(currentTab=$(this).attr("id"),activeHelp=!1),$(".tab-pane").removeClass("show active"),$(`.tab-pane[aria-labelledby="${$(this).attr("id")}"`).addClass("show active"),$(".tab-pane[aria-labelledby=\"home-tab\"").addClass("show active"),$(".tab-help").css("color","#6c757d"),"Tax Option"==$(this).text()?$(".tab-help").hide():$(".tab-help").show()}),$(document).on("click",".tab-name.tab-help",function(){return activeHelp?($("#"+currentTab).trigger("click"),!1):void($(".tab-name").removeClass("active"),$(this).addClass("active"),$(`.tab-pane[aria-labelledby="${$(this).attr("id")}"`).addClass("show active"),$(this).css("color","#fcca19"),activeHelp=!0)}),$(document).on("click",".nav-list-buttons",function(){var a=$(this).attr("data-tab");$(this).addClass("active").siblings().removeClass("active"),$("#tab-"+a).addClass("active").siblings().removeClass("active")});
