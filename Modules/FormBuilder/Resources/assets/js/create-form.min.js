"use strict";window.FormBuilder=window.FormBuilder||{},window._form_replace_fields=[{type:"radio-group",inline:!0,label:"Radio"},{type:"checkbox-group",inline:!0,label:"Checkbox Group"}],jQuery(function(){$("#visibility").change(function(a){a.preventDefault();var b=$(this);""==b.val()||"PUBLIC"==b.val()?$("#allows_edit_DIV").addClass("d-none"):($("#allows_edit_DIV").slideDown().removeClass("d-none"),$("#allows_edit").val("0"))});var a,b=$(document.getElementById("fb-editor")),c={dataType:"json",formData:window._form_builder_content?window._form_builder_content:"",controlOrder:["header","paragraph","text","textarea","select","number","date","autocomplete","file"],disableFields:[],disabledAttrs:["access","requireValidOption"],typeUserDisabledAttrs:{file:["multiple"],"checkbox-group":["other"]},disabledSubtypes:{textarea:["tinymce","quill"],file:["fineuploader"],paragraph:["address","blockquote","canvas","output"]},replaceFields:[{type:"radio-group",inline:!0,label:"Radio"},{type:"checkbox-group",inline:!0,label:"Checkbox"}],showActionButtons:!1,disabledActionButtons:["data"],sortableControls:!1,editOnAdd:!1,fieldRemoveWarn:!1,roles:null,notify:{error:function(a){return swal(jsLang("Error"),a,"error")},success:function(a){return swal(jsLang("Success"),a,"success")},warning:function(a){return swal(jsLang("Warning"),a,"warning")}},i18n:{override:{"en-US":{addOption:jsLang("Add Option")+" +",allFieldsRemoved:jsLang("All fields were removed."),allowMultipleFiles:jsLang("Allow users to upload multiple files"),autocomplete:jsLang("Finish it for me"),button:jsLang("Button"),cannotBeEmpty:jsLang("This field cannot be empty"),checkboxGroup:jsLang("Checkboxes"),checkbox:jsLang("Checkbox"),checkboxes:jsLang("Checkboxes"),className:jsLang("Class"),clearAllMessage:jsLang("Are you sure you want to clear all fields?"),clear:jsLang("Remove everything"),close:jsLang("Close"),content:jsLang("Content"),copy:jsLang("Copy To Clipboard"),copyButton:"&#43;",copyButtonTooltip:jsLang("Copy"),dateField:jsLang("Pick a date"),description:jsLang("Help Text"),descriptionField:jsLang("Description"),devMode:jsLang("Developer Mode"),editNames:jsLang("Edit Names"),editorTitle:jsLang("Form Elements"),editXML:jsLang("Edit XML"),enableOther:"Enable &quot;Other&quot",enableOtherMsg:jsLang("Let users to enter an unlisted option"),fieldNonEditable:jsLang("This field cannot be edited."),fieldRemoveWarning:jsLang("Are you sure you want to remove this field?"),fileUpload:jsLang("File Upload"),formUpdated:jsLang("Form Updated"),getStarted:jsLang("Drag a field from the right to this area"),header:jsLang("Header"),hide:jsLang("Edit"),hidden:jsLang("Hidden Input"),inline:jsLang("Inline"),inlineDesc:jsLang("Display {type} inline"),label:jsLang("Label"),labelEmpty:jsLang("Field Label cannot be empty"),limitRole:jsLang("Limit access to one or more of the following roles:"),mandatory:jsLang("Mandatory"),maxlength:jsLang("Max Length"),minOptionMessage:jsLang("This field requires a minimum of 2 options"),multipleFiles:jsLang("Multiple Files"),name:jsLang("Name"),no:jsLang("No"),noFieldsToClear:jsLang("There are no fields to clear"),number:jsLang("Number"),off:jsLang("Off"),on:jsLang("On"),option:jsLang("Option"),options:jsLang("Options"),optional:jsLang("optional"),optionLabelPlaceholder:jsLang("Label"),optionValuePlaceholder:jsLang("Value"),optionEmpty:jsLang("Option value required"),other:jsLang("Other"),paragraph:jsLang("Paragraph"),placeholder:jsLang("Placeholder"),"placeholders.value":jsLang("Value"),"placeholders.label":jsLang("Label"),"placeholders.text":"","placeholders.textarea":"","placeholders.email":jsLang("Enter you email"),"placeholders.placeholder":"","placeholders.className":jsLang("space separated classes"),"placeholders.password":jsLang("Enter your password"),preview:jsLang("Preview"),radioGroup:jsLang("Radio Group"),radio:jsLang("Radio"),removeMessage:jsLang("Remove Element"),removeOption:jsLang("Remove Option"),remove:"&#215;",required:jsLang("Required"),richText:jsLang("Rich Text Editor"),roles:jsLang("Access"),rows:jsLang("Rows"),save:jsLang("Save"),selectOptions:jsLang("Options"),select:jsLang("Select"),selectColor:jsLang("Select Color"),selectionsMessage:jsLang("Allow Multiple Selections"),size:jsLang("Size"),"size.xs":jsLang("Extra Small"),"size.sm":jsLang("Small"),"size.m":jsLang("Default"),"size.lg":jsLang("Large"),style:jsLang("Style"),"styles.btn.default":jsLang("Default"),"styles.btn.danger":jsLang("Danger"),"styles.btn.info":jsLang("Info"),"styles.btn.primary":jsLang("Primary"),"styles.btn.success":jsLang("Success"),"styles.btn.warning":jsLang("Warning"),subtype:jsLang("Type"),text:jsLang("Text Field"),textArea:jsLang("Text Area"),toggle:jsLang("Toggle"),warning:jsLang("Warning")+"!",value:jsLang("Value"),viewJSON:"{  }",viewXML:"&lt;/&gt;",yes:jsLang("Yes")}}},onSave:function(){}};a=b.formBuilder(c);var d=$(".fb-clear-btn"),e=$(".fb-showdata-btn"),f=$(".fb-save-btn");d.click(function(b){b.preventDefault();a.actions.getData().length&&sConfirm(jsLang("Are you sure you want to clear all fields from the form?"),function(){a.actions.clearFields()})}),e.click(function(b){b.preventDefault(),a.actions.showData()}),f.click(function(b){b.preventDefault();var c=$("#createFormForm");return c.parsley().validate()?a.actions.getData().length?void sConfirm("Save this form definition?",function(){f.attr("disabled","disabled"),d.attr("disabled","disabled");var b=a.actions.getData("json"),e={name:$("#name").val(),visibility:$("#visibility").val(),allows_edit:$("#allows_edit").val(),type:$("#type").val(),form_builder_json:b,_token:window.FormBuilder.csrfToken},g=c.data("formMethod")?"PUT":"POST";jQuery.ajax({url:c.attr("action"),processData:!0,data:e,method:g,cache:!1}).then(function(a){f.removeAttr("disabled"),d.removeAttr("disabled"),a.success?swal({title:jsLang("Form Saved!"),text:a.details||"",icon:"success"}).then(function(){window.location=a.dest}):(a.status="info")?swal({title:a.message,text:a.details||"",icon:"info"}):swal({title:jsLang("Error"),text:a.details||jsLang("Error"),icon:"error"})},function(a){handleAjaxError(a),f.removeAttr("disabled"),d.removeAttr("disabled")})}):void swal({title:jsLang("Error"),text:jsLang("The form builder cannot be empty"),icon:"error"}):void 0}),$("#fb-editor-footer").slideDown().removeClass("d-none")});
