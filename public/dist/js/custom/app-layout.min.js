"use strict";$(function(){$(".error").hide(),document.cookie="scrwid="+window.innerWidth,document.cookie="collapsedNavbar="+$(".pcoded-navbar").hasClass("navbar-collapsed").toString(),0<$(".select2default").length&&$(".select2default").select2(),0<$(".select2-hide-search").length&&$(".select2-hide-search").select2({minimumResultsForSearch:1/0})}),$(".lang").on("click",function(){var a=$(this).data("shortname"),b=ADMIN_SITE_URL+"/change-lang";$.ajax({url:b,data:{_token:token,lang:a,type:"admin"},type:"POST",success:function(a){1==a&&location.reload()},error:function(){return 0}})}),$(document).on("click","#itemNotifications",function(){$("#notifications").html("<img id=\"itemNotificationsLoader\" src=\""+SITE_URL+"/public/dist/img/loader/spiner.gif\" />"),$.ajax({url:SITE_URL+"/item-notifications",method:"GET",success:function(a){var b=JSON.parse(a),c="",d=0;$.each(b,function(a,b){c+="<li class=\"notification\"><div class=\"media\"><i class=\"fas fa-exclamation-triangle triangle-exclamation\"></i><div class=\"media-body\"><p class=\"mr-20\">Item Name :<strong>"+b.name+"</strong><span class=\"n-time text-muted\"></p><p>Quantity : <strong>"+b.qty+"</strong></p></div></div></li>",d++}),$("#itemCount").text(d),$("#notifications").html(c)}})}),$(function(){function a(a){return null!=f[a]}function b(a){return f[a]}const c=$(".dash-popup-modal"),d=$(".dash-popup-modal .card-content"),e=$(".dash-popup-modal .card-loader"),f={};$(document).on("mouseenter",".has-dash-popup",function(){setTimeout(()=>{if(this.matches(":hover")){var a=this.getBoundingClientRect();c[0].style.left=a.x+"px",c[0].style.top=a.y+40+"px",c.addClass("popup-active"),h($(this).data("url"))}},1e3)}),$(document).on("mouseleave",".has-dash-popup",function(){setTimeout(()=>{g(this)},500)}),c.mouseout(function(){setTimeout(()=>{g(c[0])},500)});const g=async(a=null)=>{a.matches(":hover")||c[0].matches(":hover")||(c.removeClass("popup-active"),d[0].innerHTML="",e.removeClass("d-none"))},h=c=>a(c)?i(b(c)):void fetch(c,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(a=>a.json()).then(a=>{i(a.response.records),f[c]=a.response.records}),i=async a=>{await d.html(a),await e.addClass("d-none");let b=j(c[0].getBoundingClientRect());c[0].style.left=b.x+"px",c[0].style.top=b.y+"px"},j=a=>{let b={h:window.innerHeight,w:window.innerWidth};return{x:k(b,a),y:l(b,a)}},k=(a,b)=>b.x+b.width+10<=a.w?b.x:k(a,{x:b.x-10,width:b.width}),l=(a,b)=>b.y+b.height+10<=a.h?b.y:l(a,{y:b.y-10,height:b.height})});let currentValue=null,buttonValue="",deleteValue=$("#confirmDeleteSubmitBtn").text();$(document).on("submit","form",function(){if(!$(this).hasClass("silent-form")){currentValue=$(this),buttonValue=$(this).find(":submit").text();let a=buttonValue.toLowerCase().trim();this.hasAttribute("onsubmit")||("update"==a?setText($(this),"Updating"):"save"==a?setText($(this),"Saving"):"submit"==a?setText($(this),"Submitting"):"open"==a?setText($(this),"Opening"):"reply"==a?setText($(this),"Replying"):"create"==a?setText($(this),"Creating"):setText($(this),buttonValue),$(this).find(":submit").addClass("disabled-btn"))}});function setText(a,b){a.find(":submit").text(jsLang(b)).append(`<div class="spinner-border spinner-border-sm ml-2" role="status"></div>`)}$(document).on("click","#confirmDeleteSubmitBtn",function(){deleteValue=$(this).text();let a=deleteValue.toLowerCase().trim();$(this).text(jsLang("Deleting")).append(`<div class="spinner-border spinner-border-sm ml-2" role="status"></div>`).addClass("disabled-btn"),"yes"==a&&$(this).text(jsLang("Updating")).append(`<div class="spinner-border spinner-border-sm ml-2" role="status"></div>`).addClass("disabled-btn")}),$(document).ajaxStop(function(){null!=currentValue&&(currentValue.find(":submit").removeClass("disabled-btn"),currentValue.find(":submit").text(jsLang(buttonValue))),$(".spinner-border").remove(),$("#confirmDeleteSubmitBtn").text(deleteValue).removeClass("disabled-btn")}),0<$(".import-table").length&&$(".import-table .select2").select2(),$(".select2").select2({}),$(".select2-hide-search").select2({minimumResultsForSearch:1/0}),$(".notification-close").on("click",function(){$(this).closest(".top-notification").addClass("d-none")}),$(".custom-file-input").on("change",function(){var a=$(this).val().split("\\").pop();$(this).siblings(".custom-file-label").addClass("selected").html(a)}),$(".custom-file-label").attr("data-before",`${jsLang("Browse")}`);
