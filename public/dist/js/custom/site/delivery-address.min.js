"use strict";var country="",state="",city="";let loader=`<option value="">${jsLang("Loading")}...</option>`,selectCity=`<option value="">${jsLang("Select City")}</option>`,selectState=`<option value="">${jsLang("Select State")}</option>`;var selectedCountry="",selectedState="",selectedCity="";let errorMsg=jsLang(":x is not available.");$(".change-toggle-button").click(function(a){a.stopPropagation(),$.ajax({url:SITE_URL+"/geo-locale/countries",type:"GET",dataType:"json",beforeSend:function(){$("#country").html(loader),$("#country").attr("disabled","true")},success:function(a){$("#country").empty(),$.each(a,function(a,b){$("#country").append(`<li class="country-name cursor-pointer py-3 primary-bg-hover hover:text-gray-12 px-2.5" data-country="${b.code}" data-value="${b.code}">${b.name}</li>`)}),$("#country").removeAttr("disabled"),reloadClick()}}),$(".delivery-content").slideToggle()}),$(".delivery-content").click(function(a){a.stopPropagation()}),$(document).click(function(){$(".delivery-content").slideUp()}),$(".search-name-country").on("keyup",function(){var a=this.value.toLowerCase().trim();$(".list-country li").show().filter(function(){return-1==$(this).text().toLowerCase().trim().indexOf(a)}).hide()}),$(".search-name-state").on("keyup",function(){var a=this.value.toLowerCase().trim();$(".list-state li").show().filter(function(){return-1==$(this).text().toLowerCase().trim().indexOf(a)}).hide()}),$(".search-name-city").on("keyup",function(){var a=this.value.toLowerCase().trim();$(".list-city li").show().filter(function(){return-1==$(this).text().toLowerCase().trim().indexOf(a)}).hide()});function reloadClick(){$(".country-name").click(function(){country=$(this).text(),selectedCountry=$(this).attr("data-country"),$(".view-country").removeClass("hidden").html(country+`<img class="mx-2 my-1" src="${SITE_URL}/public/frontend/assets/img/product/arrow-right.svg" alt="">`),$(".state-list , .state-name").show(),$(".country-list, .city-list").hide(),oldCity="null",getState($(this).attr("data-country"))}),$(".state-name").on("click",function(){state=$(this).text(),selectedState=$(this).attr("data-state"),$(".view-state").removeClass("hidden").html(state+`<img class="mx-2 my-1" src="${SITE_URL}/public/frontend/assets/img/product/arrow-right.svg" alt="">`),$(".state-list , .country-list").hide(),$(".city-list , .city-name").show(),getCity(selectedState,selectedCountry)}),$(".city-name").on("click",function(){city=$(this).text(),selectedCity=$(this).attr("data-city"),$(".view-city").removeClass("hidden").html(city),$("#address-view").text(country+","+state+","+city),$(".country-list").show(),$(".city-list , .delivery-content").hide(),$(".view-city , .view-state , .view-country").addClass("hidden"),getShipping()}),$(".view-country").on("click",function(){$(".country-list").show(),$(".city-list , .city-name , .state-list , .state-name").hide(),$(".view-city , .view-state").addClass("hidden")}),$(".view-state").on("click",function(){$(".country-list , .city-list").hide(),$(".state-list , .view-country").show(),$(".view-city").addClass("hidden")})}function getState(a){a?($("#stateHtml").html(""),"null"==oldCity&&$("#city").html(selectCity),$.ajax({url:SITE_URL+"/geo-locale/countries/"+a+"/states",type:"GET",dataType:"json",beforeSend:function(){$("#state").attr("disabled","true"),$("#state").html(loader)},success:function(a){$("#state").empty(),$.each(a.data,function(a,b){$("#state").append(`<li class="state-name cursor-pointer py-3 primary-bg-hover hover:text-gray-12 px-2.5" data-state="${b.code}">${b.name}</li>`)}),$("#state").removeAttr("disabled"),0>=a.length&&0>=a.data.length&&(errorMsg=errorMsg.replace(":x","State"),$("#state").html(`<li class="state-name cursor-pointer py-3 primary-bg-hover hover:text-gray-12 px-2.5">${errorMsg}</li>`)),reloadClick()}})):($("#state").html(selectState),$("#city").html(selectCity))}function getCity(a,b){a&&b?($("#city").html(""),$.ajax({url:SITE_URL+"/geo-locale/countries/"+b+"/states/"+a+"/cities",type:"GET",dataType:"json",beforeSend:function(){$("#city").html(loader),$("#city").attr("disabled","true")},success:function(a){$("#city").empty(),$.each(a.data,function(a,b){$("#city").append(`<li class="city-name cursor-pointer py-3 primary-bg-hover hover:text-gray-12 px-2.5" data-city="${b.name}">${b.name}</li>`)}),$("#city").removeAttr("disabled"),0>=a.length&&0>=a.data.length&&(errorMsg=errorMsg.replace(":x","City"),$("#city").html(`<li class="city-name cursor-pointer py-3 primary-bg-hover hover:text-gray-12 px-2.5">${errorMsg}</li>`)),reloadClick()}})):$("#city").html(selectCity)}function getShipping(){$.ajax({url:SITE_URL+"/get-shipping",type:"GET",data:{product_id:itemId,country:selectedCountry,state:selectedState,city:selectedCity},dataType:"json",success:function(a){1==a.status?($("#shipping-name").text(a.name),$("#shippingAmount").text(decimalNumberFormatWithCurrency(a.amount))):($("#shipping-name").text(jsLang("Not Applicable")),$("#shippingAmount").text(decimalNumberFormatWithCurrency(0)))}})}
